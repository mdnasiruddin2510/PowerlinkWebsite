@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="login-wrapper d-flex align-items-center justify-content-center text-center" style="margin-top:115px;">
    <!-- Background Shape-->
    <div class="background-shape"></div>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-10 col-lg-8">
                <img class="big-logo" src="img/core-img/logo-white.png" alt="">
                <!-- Register Form-->
                <div class="register-form mt-5">
                    <form>
                        <div class="form-group text-start mb-4">
                            <span>Username</span>
                            <label for="username"><i class="ti ti-user"></i></label>
                            <input class="form-control" id="username" type="text" placeholder="Designing World">
                        </div>
                        <div class="form-group text-start mb-4">
                            <span>Email</span>
                            <label for="email"><i class="ti ti-at"></i></label>
                            <input class="form-control" id="email" type="email" placeholder="help@example.com">
                        </div>
                        <div class="form-group text-start mb-4">
                            <span>Phone</span>
                            <label for="phone"><i class="ti ti-phone"></i></label>
                            <input class="form-control" id="phone" type="text" placeholder="01XXXXXXXXX">
                        </div>
                        <div class="form-group text-start mb-4">
                            <span>Password</span>
                            <label for="password"><i class="ti ti-key"></i></label>
                            <input class="input-psswd form-control" id="registerPassword" type="password" placeholder="Password">
                        </div>
                        <button class="btn btn-warning btn-lg w-100" type="button" onclick="saveRegistration()">Sign Up</button>
                    </form>
                </div>
                <!-- Login Meta-->
                <div class="login-meta-data">
                    <p class="mt-3 mb-0">Already have an account?<a class="mx-1" href="/auth/login">Sign In</a></p>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script type="text/javascript">
        function saveRegistration() {
            let name = $("#username").val();
            let email = $("#email").val();
            let phone = $("#phone").val();
            let password = $("#registerPassword").val();
            var model = {
                userName: name,
                email: email,
                phone: phone,
                password: password,
                companyId: appId
            }
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                url: baseURL + '/api/Customer/CreateCustomer',
                dataType: "json",
                type: "post",
                data: JSON.stringify(model),
                success: function (res) {
                    if (res == 1) {
                        showAlert("Successfully registered", "Success!");
                        clearForm();
                        setTimeout(function () {
                            window.location.href = "/login/index";
                        }, 1000);
                    }
                    else if (res == 2) {
                        showAlert("UserName or Email is already used", "Error");
                    }
                    else {
                        showAlert("Something went wrong", "Error!");
                    }

                },
                error: function (a, b, c) {
                    debugger;
                }
            });
        }
        function clearForm() {
            $("#username").val("");
            $("#email").val("");
            $("#phone").val("");
            $("#registerPassword").val("");
        }
    </script>
}
